-- MySQL dump 10.13  Distrib 8.0.12, for macos10.13 (x86_64)
--
-- Host: 127.0.0.1    Database: r21
-- ------------------------------------------------------
-- Server version	8.0.12

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
 SET NAMES utf8 ;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Dumping data for table `encounters`
--

LOCK TABLES `encounters` WRITE;
/*!40000 ALTER TABLE `encounters` DISABLE KEYS */;
INSERT INTO `encounters` VALUES (1,1,2,'2018-10-11 16:11:55',NULL),(2,3,4,'2018-10-11 16:21:21',NULL),(3,4,2,'2018-10-11 16:21:33',NULL),(4,2,1,'2018-10-11 16:26:03',NULL),(5,4,1,'2018-10-11 16:26:16',NULL),(6,1,5,'2018-10-11 16:26:28',NULL),(7,1,6,'2018-10-11 19:24:41',NULL),(8,2,4,'2018-10-11 19:25:00',NULL),(9,5,2,'2018-10-11 19:25:10',NULL),(10,4,5,'2018-10-11 19:25:21',NULL),(11,5,6,'2018-10-11 19:29:08',NULL),(12,5,4,'2018-10-11 19:29:08',NULL),(13,4,6,'2018-10-11 19:29:08',NULL),(14,2,6,'2018-10-11 19:29:09',NULL),(15,6,5,'2018-10-11 19:29:09',NULL),(16,6,4,'2018-10-11 19:29:09',NULL),(17,6,2,'2018-10-11 19:29:09',NULL),(18,2,7,'2018-10-11 19:29:09',NULL),(19,7,8,'2018-10-11 19:29:09',NULL),(20,8,7,'2018-10-11 19:29:09',NULL),(21,7,2,'2018-10-11 19:29:10',NULL),(22,2,5,'2018-10-11 19:29:14',NULL),(23,7,4,'2018-10-11 19:29:15',NULL),(24,4,7,'2018-10-11 19:29:15',NULL),(25,6,7,'2018-10-11 19:29:17',NULL),(26,7,6,'2018-10-11 19:29:17',NULL),(27,2,2,'2018-10-11 19:29:17',NULL),(28,7,7,'2018-10-11 19:29:18',NULL),(29,4,4,'2018-10-11 19:29:18',NULL),(30,5,5,'2018-10-11 19:31:37',NULL),(31,2,8,'2018-10-11 19:31:38',NULL),(32,8,2,'2018-10-11 19:31:38',NULL);
/*!40000 ALTER TABLE `encounters` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping data for table `games`
--

LOCK TABLES `games` WRITE;
/*!40000 ALTER TABLE `games` DISABLE KEYS */;
INSERT INTO `games` VALUES (1,1,0,1,0,'2018-10-11 16:11:55',NULL),(2,1,0,2,0,'2018-10-11 16:21:21',NULL),(3,0,1,3,0,'2018-10-11 16:21:33',NULL),(4,1,0,4,0,'2018-10-11 16:26:03',NULL),(5,0,1,5,0,'2018-10-11 16:26:16',NULL),(6,1,0,6,0,'2018-10-11 16:26:28',NULL),(7,0,1,7,0,'2018-10-11 19:24:41',NULL),(8,1,0,1,0,'2018-10-11 19:24:51',NULL),(9,1,0,8,0,'2018-10-11 19:25:00',NULL),(10,0,1,9,0,'2018-10-11 19:25:10',NULL),(11,0,1,10,0,'2018-10-11 19:25:21',NULL),(12,1,0,7,0,'2018-10-11 19:25:40',NULL),(13,0,1,4,0,'2018-10-11 19:25:53',NULL),(14,0,1,8,0,'2018-10-11 19:26:04',NULL),(15,1,0,8,0,'2017-04-28 22:00:00',NULL),(16,1,0,8,0,'2017-04-28 22:00:00',NULL),(17,1,0,8,0,'2017-04-28 22:00:00',NULL),(18,0,1,8,0,'2017-04-28 22:00:00',NULL),(19,0,1,8,0,'2017-04-28 22:00:00',NULL),(20,0,1,8,0,'2017-04-28 22:00:00',NULL),(21,1,0,11,0,'2017-04-28 22:00:00',NULL),(22,0,1,12,0,'2017-04-29 22:00:00',NULL),(23,1,0,13,0,'2017-04-29 22:00:00',NULL),(24,1,0,14,0,'2017-04-29 22:00:00',NULL),(25,1,0,15,0,'2017-04-29 22:00:00',NULL),(26,1,0,16,0,'2017-04-29 22:00:00',NULL),(27,0,1,16,0,'2017-04-29 22:00:00',NULL),(28,1,0,17,0,'2017-04-29 22:00:00',NULL),(29,0,1,15,0,'2017-04-29 22:00:00',NULL),(30,0,1,8,0,'2017-04-29 22:00:00',NULL),(31,1,0,16,0,'2017-04-29 22:00:00',NULL),(32,1,0,17,0,'2017-04-29 22:00:00',NULL),(33,0,1,16,0,'2017-04-29 22:00:00',NULL),(34,1,0,15,0,'2017-04-29 22:00:00',NULL),(35,0,1,18,0,'2017-05-01 22:00:00',NULL),(36,0,1,18,0,'2017-05-01 22:00:00',NULL),(37,1,0,19,0,'2017-05-05 22:00:00',NULL),(38,1,0,19,0,'2017-05-05 22:00:00',NULL),(39,1,0,19,0,'2017-05-05 22:00:00',NULL),(40,0,1,19,0,'2017-05-05 22:00:00',NULL),(41,1,0,20,0,'2017-05-05 22:00:00',NULL),(42,1,0,21,0,'2017-05-05 22:00:00',NULL),(43,0,1,21,0,'2017-05-05 22:00:00',NULL),(44,0,1,21,0,'2017-05-05 22:00:00',NULL),(45,0,1,21,0,'2017-05-05 22:00:00',NULL),(46,0,1,3,0,'2017-05-14 22:00:00',NULL),(47,0,1,8,0,'2017-05-14 22:00:00',NULL),(48,0,1,3,0,'2017-05-14 22:00:00',NULL),(49,1,0,8,0,'2017-05-14 22:00:00',NULL),(50,1,0,8,0,'2017-05-14 22:00:00',NULL),(51,1,0,8,0,'2017-05-14 22:00:00',NULL),(52,0,1,8,0,'2017-05-14 22:00:00',NULL),(53,1,0,3,0,'2017-05-14 22:00:00',NULL),(54,0,1,21,0,'2017-05-14 22:00:00',NULL),(55,0,1,18,0,'2017-05-14 22:00:00',NULL),(56,0,1,21,0,'2017-05-17 22:00:00',NULL),(57,0,1,18,0,'2017-05-17 22:00:00',NULL),(58,0,1,21,0,'2017-05-17 22:00:00',NULL),(59,1,0,18,0,'2017-05-17 22:00:00',NULL),(60,1,0,18,0,'2017-05-17 22:00:00',NULL),(61,1,0,18,0,'2017-05-17 22:00:00',NULL),(62,0,1,18,0,'2017-05-17 22:00:00',NULL),(63,0,1,21,0,'2017-05-17 22:00:00',NULL),(64,1,0,18,0,'2017-05-17 22:00:00',NULL),(65,0,1,18,0,'2017-05-17 22:00:00',NULL),(66,1,0,21,0,'2017-05-17 22:00:00',NULL),(67,1,0,21,0,'2017-05-17 22:00:00',NULL),(68,1,0,21,0,'2017-05-29 22:00:00',NULL),(69,1,0,21,0,'2017-05-29 22:00:00',NULL),(70,0,1,21,0,'2017-05-29 22:00:00',NULL),(71,0,1,18,0,'2017-05-29 22:00:00',NULL),(72,0,1,21,0,'2017-05-29 22:00:00',NULL),(73,1,0,18,0,'2017-05-29 22:00:00',NULL),(74,1,0,14,0,'2017-06-02 22:00:00',NULL),(75,1,0,8,0,'2017-06-02 22:00:00',NULL),(76,0,1,8,0,'2017-06-02 22:00:00',NULL),(77,1,0,12,0,'2017-06-02 22:00:00',NULL),(78,0,1,12,0,'2017-06-02 22:00:00',NULL),(79,0,1,12,0,'2017-06-02 22:00:00',NULL),(80,0,1,12,0,'2017-06-02 22:00:00',NULL),(81,1,0,22,0,'2017-06-02 22:00:00',NULL),(82,0,1,22,0,'2017-06-02 22:00:00',NULL),(83,1,0,9,0,'2017-06-02 22:00:00',NULL),(84,1,0,9,0,'2017-06-02 22:00:00',NULL),(85,1,0,18,0,'2017-06-08 22:00:00',NULL),(86,0,1,18,0,'2017-06-08 22:00:00',NULL),(87,0,1,21,0,'2017-06-08 22:00:00',NULL),(88,0,1,18,0,'2017-06-08 22:00:00',NULL),(89,0,1,21,0,'2017-06-08 22:00:00',NULL),(90,1,0,8,0,'2017-06-08 22:00:00',NULL),(91,1,0,23,0,'2017-06-08 22:00:00',NULL),(92,0,1,23,0,'2017-06-08 22:00:00',NULL),(93,1,0,3,0,'2017-06-08 22:00:00',NULL),(94,0,1,24,0,'2017-06-08 22:00:00',NULL),(95,1,0,3,0,'2017-06-08 22:00:00',NULL),(96,0,1,24,0,'2017-06-08 22:00:00',NULL),(97,1,0,21,0,'2017-06-09 22:00:00',NULL),(98,0,1,21,0,'2017-06-09 22:00:00',NULL),(99,1,0,18,0,'2017-06-09 22:00:00',NULL),(100,1,0,21,0,'2017-06-09 22:00:00',NULL),(101,0,1,3,0,'2017-06-22 22:00:00',NULL),(102,0,1,8,0,'2017-06-22 22:00:00',NULL),(103,0,1,24,0,'2017-06-22 22:00:00',NULL),(104,1,0,23,0,'2017-06-22 22:00:00',NULL),(105,0,1,23,0,'2017-06-22 22:00:00',NULL),(106,1,0,3,0,'2017-06-22 22:00:00',NULL),(107,1,0,24,0,'2017-06-22 22:00:00',NULL),(108,0,1,24,0,'2017-06-22 22:00:00',NULL),(109,1,0,24,0,'2017-06-22 22:00:00',NULL),(110,0,1,24,0,'2017-06-22 22:00:00',NULL),(111,0,1,24,0,'2017-06-22 22:00:00',NULL),(112,1,0,24,0,'2017-06-23 22:00:00',NULL),(113,1,0,24,0,'2017-06-23 22:00:00',NULL),(114,0,1,17,0,'2017-06-28 22:00:00',NULL),(115,1,0,14,0,'2017-06-28 22:00:00',NULL),(116,0,1,14,0,'2017-06-28 22:00:00',NULL),(117,0,1,17,0,'2017-06-28 22:00:00',NULL),(118,1,0,14,0,'2017-06-28 22:00:00',NULL),(119,0,1,14,0,'2017-06-28 22:00:00',NULL),(120,0,1,17,0,'2017-06-28 22:00:00',NULL),(121,0,1,3,0,'2017-07-20 22:00:00',NULL),(122,0,1,8,0,'2017-07-20 22:00:00',NULL),(123,0,1,3,0,'2017-07-20 22:00:00',NULL),(124,1,0,18,0,'2017-07-22 22:00:00',NULL),(125,1,0,18,0,'2017-07-22 22:00:00',NULL),(126,0,1,14,0,'2017-07-22 22:00:00',NULL),(127,1,0,25,0,'2017-07-22 22:00:00',NULL),(128,1,0,26,0,'2017-07-22 22:00:00',NULL),(129,1,0,21,0,'2017-07-22 22:00:00',NULL),(130,0,1,27,0,'2017-07-22 22:00:00',NULL),(131,1,0,27,0,'2017-07-22 22:00:00',NULL),(132,0,1,3,0,'2017-08-12 22:00:00',NULL),(133,0,1,8,0,'2017-08-12 22:00:00',NULL),(134,1,0,3,0,'2017-08-12 22:00:00',NULL),(135,1,0,3,0,'2017-08-12 22:00:00',NULL),(136,1,0,13,0,'2017-08-12 22:00:00',NULL),(137,1,0,3,0,'2017-08-12 22:00:00',NULL),(138,0,1,3,0,'2017-08-12 22:00:00',NULL),(139,0,1,8,0,'2017-08-12 22:00:00',NULL),(140,1,0,3,0,'2017-10-06 22:00:00',NULL),(141,0,1,3,0,'2017-10-06 22:00:00',NULL),(142,0,1,8,0,'2017-10-06 22:00:00',NULL),(143,1,0,3,0,'2017-10-06 22:00:00',NULL),(144,0,1,24,0,'2017-10-06 22:00:00',NULL),(145,1,0,28,0,'2017-10-06 22:00:00',NULL),(146,1,0,28,0,'2017-10-06 22:00:00',NULL),(147,0,1,29,0,'2017-10-06 22:00:00',NULL),(148,0,1,24,0,'2017-10-07 22:00:00',NULL),(149,1,0,23,0,'2017-10-07 22:00:00',NULL),(150,1,0,21,0,'2017-10-07 22:00:00',NULL),(151,0,1,23,0,'2017-10-07 22:00:00',NULL),(152,0,1,27,0,'2017-10-07 22:00:00',NULL),(153,1,0,23,0,'2017-10-07 22:00:00',NULL),(154,0,1,21,0,'2017-10-07 22:00:00',NULL),(155,0,1,8,0,'2017-10-07 22:00:00',NULL),(156,0,1,24,0,'2017-10-07 22:00:00',NULL),(157,0,1,26,0,'2017-10-12 22:00:00',NULL),(158,0,1,18,0,'2017-10-12 22:00:00',NULL),(159,1,0,21,0,'2017-10-13 22:00:00',NULL),(160,0,1,9,0,'2017-10-23 22:00:00',NULL),(161,0,1,22,0,'2017-10-23 22:00:00',NULL),(162,0,1,9,0,'2017-10-23 22:00:00',NULL),(163,1,0,21,0,'2017-10-31 23:00:00',NULL),(164,0,1,21,0,'2017-10-31 23:00:00',NULL),(165,0,1,18,0,'2017-10-31 23:00:00',NULL),(166,1,0,22,0,'2018-09-15 22:00:00',NULL),(167,0,1,22,0,'2018-09-15 22:00:00',NULL),(168,0,1,9,0,'2018-09-15 22:00:00',NULL),(169,1,0,10,0,'2018-09-15 22:00:00',NULL),(170,0,1,10,0,'2018-09-15 22:00:00',NULL),(171,0,1,12,0,'2018-09-15 22:00:00',NULL),(172,0,1,3,0,'2018-09-15 22:00:00',NULL),(173,0,1,8,0,'2018-09-15 22:00:00',NULL),(174,1,0,10,0,'2018-09-15 22:00:00',NULL),(175,1,0,10,0,'2018-09-15 22:00:00',NULL),(176,1,0,12,0,'2018-09-15 22:00:00',NULL),(177,0,1,12,0,'2018-09-15 22:00:00',NULL),(178,1,0,10,0,'2018-09-15 22:00:00',NULL),(179,0,1,3,0,'2018-09-15 22:00:00',NULL),(180,0,1,22,0,'2018-09-15 22:00:00',NULL),(181,0,1,12,0,'2018-09-15 22:00:00',NULL),(182,1,0,8,0,'2017-04-28 22:00:00',NULL),(183,1,0,8,0,'2017-04-28 22:00:00',NULL),(184,1,0,8,0,'2017-04-28 22:00:00',NULL),(185,0,1,8,0,'2017-04-28 22:00:00',NULL),(186,0,1,8,0,'2017-04-28 22:00:00',NULL),(187,0,1,8,0,'2017-04-28 22:00:00',NULL),(188,1,0,11,0,'2017-04-28 22:00:00',NULL),(189,0,1,12,0,'2017-04-29 22:00:00',NULL),(190,1,0,13,0,'2017-04-29 22:00:00',NULL),(191,1,0,14,0,'2017-04-29 22:00:00',NULL),(192,1,0,15,0,'2017-04-29 22:00:00',NULL),(193,1,0,16,0,'2017-04-29 22:00:00',NULL),(194,0,1,16,0,'2017-04-29 22:00:00',NULL),(195,1,0,17,0,'2017-04-29 22:00:00',NULL),(196,0,1,15,0,'2017-04-29 22:00:00',NULL),(197,0,1,8,0,'2017-04-29 22:00:00',NULL),(198,1,0,16,0,'2017-04-29 22:00:00',NULL),(199,1,0,17,0,'2017-04-29 22:00:00',NULL),(200,0,1,16,0,'2017-04-29 22:00:00',NULL),(201,1,0,15,0,'2017-04-29 22:00:00',NULL),(202,0,1,18,0,'2017-05-01 22:00:00',NULL),(203,0,1,18,0,'2017-05-01 22:00:00',NULL),(204,1,0,19,0,'2017-05-05 22:00:00',NULL),(205,1,0,19,0,'2017-05-05 22:00:00',NULL),(206,1,0,19,0,'2017-05-05 22:00:00',NULL),(207,0,1,19,0,'2017-05-05 22:00:00',NULL),(208,1,0,20,0,'2017-05-05 22:00:00',NULL),(209,1,0,21,0,'2017-05-05 22:00:00',NULL),(210,0,1,21,0,'2017-05-05 22:00:00',NULL),(211,0,1,21,0,'2017-05-05 22:00:00',NULL),(212,0,1,21,0,'2017-05-05 22:00:00',NULL),(213,0,1,3,0,'2017-05-14 22:00:00',NULL),(214,0,1,8,0,'2017-05-14 22:00:00',NULL),(215,0,1,3,0,'2017-05-14 22:00:00',NULL),(216,1,0,8,0,'2017-05-14 22:00:00',NULL),(217,1,0,8,0,'2017-05-14 22:00:00',NULL),(218,1,0,8,0,'2017-05-14 22:00:00',NULL),(219,0,1,8,0,'2017-05-14 22:00:00',NULL),(220,1,0,3,0,'2017-05-14 22:00:00',NULL),(221,0,1,21,0,'2017-05-14 22:00:00',NULL),(222,0,1,18,0,'2017-05-14 22:00:00',NULL),(223,0,1,21,0,'2017-05-17 22:00:00',NULL),(224,0,1,18,0,'2017-05-17 22:00:00',NULL),(225,0,1,21,0,'2017-05-17 22:00:00',NULL),(226,1,0,18,0,'2017-05-17 22:00:00',NULL),(227,1,0,18,0,'2017-05-17 22:00:00',NULL),(228,1,0,18,0,'2017-05-17 22:00:00',NULL),(229,0,1,18,0,'2017-05-17 22:00:00',NULL),(230,0,1,21,0,'2017-05-17 22:00:00',NULL),(231,1,0,18,0,'2017-05-17 22:00:00',NULL),(232,0,1,18,0,'2017-05-17 22:00:00',NULL),(233,1,0,21,0,'2017-05-17 22:00:00',NULL),(234,1,0,21,0,'2017-05-17 22:00:00',NULL),(235,1,0,21,0,'2017-05-29 22:00:00',NULL),(236,1,0,21,0,'2017-05-29 22:00:00',NULL),(237,0,1,21,0,'2017-05-29 22:00:00',NULL),(238,0,1,18,0,'2017-05-29 22:00:00',NULL),(239,0,1,21,0,'2017-05-29 22:00:00',NULL),(240,1,0,18,0,'2017-05-29 22:00:00',NULL),(241,1,0,14,0,'2017-06-02 22:00:00',NULL),(242,1,0,8,0,'2017-06-02 22:00:00',NULL),(243,0,1,8,0,'2017-06-02 22:00:00',NULL),(244,1,0,12,0,'2017-06-02 22:00:00',NULL),(245,0,1,12,0,'2017-06-02 22:00:00',NULL),(246,0,1,12,0,'2017-06-02 22:00:00',NULL),(247,0,1,12,0,'2017-06-02 22:00:00',NULL),(248,1,0,22,0,'2017-06-02 22:00:00',NULL),(249,0,1,22,0,'2017-06-02 22:00:00',NULL),(250,1,0,9,0,'2017-06-02 22:00:00',NULL),(251,1,0,9,0,'2017-06-02 22:00:00',NULL),(252,1,0,18,0,'2017-06-08 22:00:00',NULL),(253,0,1,18,0,'2017-06-08 22:00:00',NULL),(254,0,1,21,0,'2017-06-08 22:00:00',NULL),(255,0,1,18,0,'2017-06-08 22:00:00',NULL),(256,0,1,21,0,'2017-06-08 22:00:00',NULL),(257,1,0,8,0,'2017-06-08 22:00:00',NULL),(258,1,0,23,0,'2017-06-08 22:00:00',NULL),(259,0,1,23,0,'2017-06-08 22:00:00',NULL),(260,1,0,3,0,'2017-06-08 22:00:00',NULL),(261,0,1,24,0,'2017-06-08 22:00:00',NULL),(262,1,0,3,0,'2017-06-08 22:00:00',NULL),(263,0,1,24,0,'2017-06-08 22:00:00',NULL),(264,1,0,21,0,'2017-06-09 22:00:00',NULL),(265,0,1,21,0,'2017-06-09 22:00:00',NULL),(266,1,0,18,0,'2017-06-09 22:00:00',NULL),(267,1,0,21,0,'2017-06-09 22:00:00',NULL),(268,0,1,3,0,'2017-06-22 22:00:00',NULL),(269,0,1,8,0,'2017-06-22 22:00:00',NULL),(270,0,1,24,0,'2017-06-22 22:00:00',NULL),(271,1,0,23,0,'2017-06-22 22:00:00',NULL),(272,0,1,23,0,'2017-06-22 22:00:00',NULL),(273,1,0,3,0,'2017-06-22 22:00:00',NULL),(274,1,0,24,0,'2017-06-22 22:00:00',NULL),(275,0,1,24,0,'2017-06-22 22:00:00',NULL),(276,1,0,24,0,'2017-06-22 22:00:00',NULL),(277,0,1,24,0,'2017-06-22 22:00:00',NULL),(278,0,1,24,0,'2017-06-22 22:00:00',NULL),(279,1,0,24,0,'2017-06-23 22:00:00',NULL),(280,1,0,24,0,'2017-06-23 22:00:00',NULL),(281,0,1,17,0,'2017-06-28 22:00:00',NULL),(282,1,0,14,0,'2017-06-28 22:00:00',NULL),(283,0,1,14,0,'2017-06-28 22:00:00',NULL),(284,0,1,17,0,'2017-06-28 22:00:00',NULL),(285,1,0,14,0,'2017-06-28 22:00:00',NULL),(286,0,1,14,0,'2017-06-28 22:00:00',NULL),(287,0,1,17,0,'2017-06-28 22:00:00',NULL),(288,0,1,3,0,'2017-07-20 22:00:00',NULL),(289,0,1,8,0,'2017-07-20 22:00:00',NULL),(290,0,1,3,0,'2017-07-20 22:00:00',NULL),(291,1,0,18,0,'2017-07-22 22:00:00',NULL),(292,1,0,18,0,'2017-07-22 22:00:00',NULL),(293,0,1,14,0,'2017-07-22 22:00:00',NULL),(294,1,0,25,0,'2017-07-22 22:00:00',NULL),(295,1,0,26,0,'2017-07-22 22:00:00',NULL),(296,1,0,21,0,'2017-07-22 22:00:00',NULL),(297,0,1,27,0,'2017-07-22 22:00:00',NULL),(298,1,0,27,0,'2017-07-22 22:00:00',NULL),(299,0,1,3,0,'2017-08-12 22:00:00',NULL),(300,0,1,8,0,'2017-08-12 22:00:00',NULL),(301,1,0,3,0,'2017-08-12 22:00:00',NULL),(302,1,0,3,0,'2017-08-12 22:00:00',NULL),(303,1,0,13,0,'2017-08-12 22:00:00',NULL),(304,1,0,3,0,'2017-08-12 22:00:00',NULL),(305,0,1,3,0,'2017-08-12 22:00:00',NULL),(306,0,1,8,0,'2017-08-12 22:00:00',NULL),(307,1,0,3,0,'2017-10-06 22:00:00',NULL),(308,0,1,3,0,'2017-10-06 22:00:00',NULL),(309,0,1,8,0,'2017-10-06 22:00:00',NULL),(310,1,0,3,0,'2017-10-06 22:00:00',NULL),(311,0,1,24,0,'2017-10-06 22:00:00',NULL),(312,1,0,28,0,'2017-10-06 22:00:00',NULL),(313,1,0,28,0,'2017-10-06 22:00:00',NULL),(314,0,1,29,0,'2017-10-06 22:00:00',NULL),(315,0,1,24,0,'2017-10-07 22:00:00',NULL),(316,1,0,23,0,'2017-10-07 22:00:00',NULL),(317,1,0,21,0,'2017-10-07 22:00:00',NULL),(318,0,1,23,0,'2017-10-07 22:00:00',NULL),(319,0,1,27,0,'2017-10-07 22:00:00',NULL),(320,1,0,23,0,'2017-10-07 22:00:00',NULL),(321,0,1,21,0,'2017-10-07 22:00:00',NULL),(322,0,1,8,0,'2017-10-07 22:00:00',NULL),(323,0,1,24,0,'2017-10-07 22:00:00',NULL),(324,0,1,26,0,'2017-10-12 22:00:00',NULL),(325,0,1,18,0,'2017-10-12 22:00:00',NULL),(326,1,0,21,0,'2017-10-13 22:00:00',NULL),(327,0,1,9,0,'2017-10-23 22:00:00',NULL),(328,0,1,22,0,'2017-10-23 22:00:00',NULL),(329,0,1,9,0,'2017-10-23 22:00:00',NULL),(330,1,0,21,0,'2017-10-31 23:00:00',NULL),(331,0,1,21,0,'2017-10-31 23:00:00',NULL),(332,0,1,18,0,'2017-10-31 23:00:00',NULL),(333,1,0,22,0,'2018-09-15 22:00:00',NULL),(334,0,1,22,0,'2018-09-15 22:00:00',NULL),(335,0,1,9,0,'2018-09-15 22:00:00',NULL),(336,1,0,10,0,'2018-09-15 22:00:00',NULL),(337,0,1,10,0,'2018-09-15 22:00:00',NULL),(338,0,1,12,0,'2018-09-15 22:00:00',NULL),(339,0,1,3,0,'2018-09-15 22:00:00',NULL),(340,0,1,8,0,'2018-09-15 22:00:00',NULL),(341,1,0,10,0,'2018-09-15 22:00:00',NULL),(342,1,0,10,0,'2018-09-15 22:00:00',NULL),(343,1,0,12,0,'2018-09-15 22:00:00',NULL),(344,0,1,12,0,'2018-09-15 22:00:00',NULL),(345,1,0,10,0,'2018-09-15 22:00:00',NULL),(346,0,1,3,0,'2018-09-15 22:00:00',NULL),(347,0,1,22,0,'2018-09-15 22:00:00',NULL),(348,0,1,12,0,'2018-09-15 22:00:00',NULL),(349,1,0,8,0,'2017-04-28 22:00:00',NULL),(350,1,0,8,0,'2017-04-28 22:00:00',NULL),(351,1,0,8,0,'2017-04-28 22:00:00',NULL),(352,0,1,8,0,'2017-04-28 22:00:00',NULL),(353,0,1,8,0,'2017-04-28 22:00:00',NULL),(354,0,1,8,0,'2017-04-28 22:00:00',NULL),(355,1,0,11,0,'2017-04-28 22:00:00',NULL),(356,0,1,12,0,'2017-04-29 22:00:00',NULL),(357,1,0,13,0,'2017-04-29 22:00:00',NULL),(358,1,0,14,0,'2017-04-29 22:00:00',NULL),(359,1,0,15,0,'2017-04-29 22:00:00',NULL),(360,1,0,16,0,'2017-04-29 22:00:00',NULL),(361,0,1,16,0,'2017-04-29 22:00:00',NULL),(362,1,0,17,0,'2017-04-29 22:00:00',NULL),(363,0,1,15,0,'2017-04-29 22:00:00',NULL),(364,0,1,8,0,'2017-04-29 22:00:00',NULL),(365,1,0,16,0,'2017-04-29 22:00:00',NULL),(366,1,0,17,0,'2017-04-29 22:00:00',NULL),(367,0,1,16,0,'2017-04-29 22:00:00',NULL),(368,1,0,15,0,'2017-04-29 22:00:00',NULL),(369,0,1,18,0,'2017-05-01 22:00:00',NULL),(370,0,1,18,0,'2017-05-01 22:00:00',NULL),(371,1,0,19,0,'2017-05-05 22:00:00',NULL),(372,1,0,19,0,'2017-05-05 22:00:00',NULL),(373,1,0,19,0,'2017-05-05 22:00:00',NULL),(374,0,1,19,0,'2017-05-05 22:00:00',NULL),(375,1,0,20,0,'2017-05-05 22:00:00',NULL),(376,1,0,21,0,'2017-05-05 22:00:00',NULL),(377,0,1,21,0,'2017-05-05 22:00:00',NULL),(378,0,1,21,0,'2017-05-05 22:00:00',NULL),(379,0,1,21,0,'2017-05-05 22:00:00',NULL),(380,0,1,3,0,'2017-05-14 22:00:00',NULL),(381,0,1,8,0,'2017-05-14 22:00:00',NULL),(382,0,1,3,0,'2017-05-14 22:00:00',NULL),(383,1,0,8,0,'2017-05-14 22:00:00',NULL),(384,1,0,8,0,'2017-05-14 22:00:00',NULL),(385,1,0,8,0,'2017-05-14 22:00:00',NULL),(386,0,1,8,0,'2017-05-14 22:00:00',NULL),(387,1,0,3,0,'2017-05-14 22:00:00',NULL),(388,0,1,21,0,'2017-05-14 22:00:00',NULL),(389,0,1,18,0,'2017-05-14 22:00:00',NULL),(390,0,1,21,0,'2017-05-17 22:00:00',NULL),(391,0,1,18,0,'2017-05-17 22:00:00',NULL),(392,0,1,21,0,'2017-05-17 22:00:00',NULL),(393,1,0,18,0,'2017-05-17 22:00:00',NULL),(394,1,0,18,0,'2017-05-17 22:00:00',NULL),(395,1,0,18,0,'2017-05-17 22:00:00',NULL),(396,0,1,18,0,'2017-05-17 22:00:00',NULL),(397,0,1,21,0,'2017-05-17 22:00:00',NULL),(398,1,0,18,0,'2017-05-17 22:00:00',NULL),(399,0,1,18,0,'2017-05-17 22:00:00',NULL),(400,1,0,21,0,'2017-05-17 22:00:00',NULL),(401,1,0,21,0,'2017-05-17 22:00:00',NULL),(402,1,0,21,0,'2017-05-29 22:00:00',NULL),(403,1,0,21,0,'2017-05-29 22:00:00',NULL),(404,0,1,21,0,'2017-05-29 22:00:00',NULL),(405,0,1,18,0,'2017-05-29 22:00:00',NULL),(406,0,1,21,0,'2017-05-29 22:00:00',NULL),(407,1,0,18,0,'2017-05-29 22:00:00',NULL),(408,1,0,14,0,'2017-06-02 22:00:00',NULL),(409,1,0,8,0,'2017-06-02 22:00:00',NULL),(410,0,1,8,0,'2017-06-02 22:00:00',NULL),(411,1,0,12,0,'2017-06-02 22:00:00',NULL),(412,0,1,12,0,'2017-06-02 22:00:00',NULL),(413,0,1,12,0,'2017-06-02 22:00:00',NULL),(414,0,1,12,0,'2017-06-02 22:00:00',NULL),(415,1,0,22,0,'2017-06-02 22:00:00',NULL),(416,0,1,22,0,'2017-06-02 22:00:00',NULL),(417,1,0,9,0,'2017-06-02 22:00:00',NULL),(418,1,0,9,0,'2017-06-02 22:00:00',NULL),(419,1,0,18,0,'2017-06-08 22:00:00',NULL),(420,0,1,18,0,'2017-06-08 22:00:00',NULL),(421,0,1,21,0,'2017-06-08 22:00:00',NULL),(422,0,1,18,0,'2017-06-08 22:00:00',NULL),(423,0,1,21,0,'2017-06-08 22:00:00',NULL),(424,1,0,8,0,'2017-06-08 22:00:00',NULL),(425,1,0,23,0,'2017-06-08 22:00:00',NULL),(426,0,1,23,0,'2017-06-08 22:00:00',NULL),(427,1,0,3,0,'2017-06-08 22:00:00',NULL),(428,0,1,24,0,'2017-06-08 22:00:00',NULL),(429,1,0,3,0,'2017-06-08 22:00:00',NULL),(430,0,1,24,0,'2017-06-08 22:00:00',NULL),(431,1,0,21,0,'2017-06-09 22:00:00',NULL),(432,0,1,21,0,'2017-06-09 22:00:00',NULL),(433,1,0,18,0,'2017-06-09 22:00:00',NULL),(434,1,0,21,0,'2017-06-09 22:00:00',NULL),(435,0,1,3,0,'2017-06-22 22:00:00',NULL),(436,0,1,8,0,'2017-06-22 22:00:00',NULL),(437,0,1,24,0,'2017-06-22 22:00:00',NULL),(438,1,0,23,0,'2017-06-22 22:00:00',NULL),(439,0,1,23,0,'2017-06-22 22:00:00',NULL),(440,1,0,3,0,'2017-06-22 22:00:00',NULL),(441,1,0,24,0,'2017-06-22 22:00:00',NULL),(442,0,1,24,0,'2017-06-22 22:00:00',NULL),(443,1,0,24,0,'2017-06-22 22:00:00',NULL),(444,0,1,24,0,'2017-06-22 22:00:00',NULL),(445,0,1,24,0,'2017-06-22 22:00:00',NULL),(446,1,0,24,0,'2017-06-23 22:00:00',NULL),(447,1,0,24,0,'2017-06-23 22:00:00',NULL),(448,0,1,17,0,'2017-06-28 22:00:00',NULL),(449,1,0,14,0,'2017-06-28 22:00:00',NULL),(450,0,1,14,0,'2017-06-28 22:00:00',NULL),(451,0,1,17,0,'2017-06-28 22:00:00',NULL),(452,1,0,14,0,'2017-06-28 22:00:00',NULL),(453,0,1,14,0,'2017-06-28 22:00:00',NULL),(454,0,1,17,0,'2017-06-28 22:00:00',NULL),(455,0,1,3,0,'2017-07-20 22:00:00',NULL),(456,0,1,8,0,'2017-07-20 22:00:00',NULL),(457,0,1,3,0,'2017-07-20 22:00:00',NULL),(458,1,0,18,0,'2017-07-22 22:00:00',NULL),(459,1,0,18,0,'2017-07-22 22:00:00',NULL),(460,0,1,14,0,'2017-07-22 22:00:00',NULL),(461,1,0,25,0,'2017-07-22 22:00:00',NULL),(462,1,0,26,0,'2017-07-22 22:00:00',NULL),(463,1,0,21,0,'2017-07-22 22:00:00',NULL),(464,0,1,27,0,'2017-07-22 22:00:00',NULL),(465,1,0,27,0,'2017-07-22 22:00:00',NULL),(466,0,1,3,0,'2017-08-12 22:00:00',NULL),(467,0,1,8,0,'2017-08-12 22:00:00',NULL),(468,1,0,3,0,'2017-08-12 22:00:00',NULL),(469,1,0,3,0,'2017-08-12 22:00:00',NULL),(470,1,0,13,0,'2017-08-12 22:00:00',NULL),(471,1,0,3,0,'2017-08-12 22:00:00',NULL),(472,0,1,3,0,'2017-08-12 22:00:00',NULL),(473,0,1,8,0,'2017-08-12 22:00:00',NULL),(474,1,0,3,0,'2017-10-06 22:00:00',NULL),(475,0,1,3,0,'2017-10-06 22:00:00',NULL),(476,0,1,8,0,'2017-10-06 22:00:00',NULL),(477,1,0,3,0,'2017-10-06 22:00:00',NULL),(478,0,1,24,0,'2017-10-06 22:00:00',NULL),(479,1,0,28,0,'2017-10-06 22:00:00',NULL),(480,1,0,28,0,'2017-10-06 22:00:00',NULL),(481,0,1,29,0,'2017-10-06 22:00:00',NULL),(482,0,1,24,0,'2017-10-07 22:00:00',NULL),(483,1,0,23,0,'2017-10-07 22:00:00',NULL),(484,1,0,21,0,'2017-10-07 22:00:00',NULL),(485,0,1,23,0,'2017-10-07 22:00:00',NULL),(486,0,1,27,0,'2017-10-07 22:00:00',NULL),(487,1,0,23,0,'2017-10-07 22:00:00',NULL),(488,0,1,21,0,'2017-10-07 22:00:00',NULL),(489,0,1,8,0,'2017-10-07 22:00:00',NULL),(490,0,1,24,0,'2017-10-07 22:00:00',NULL),(491,0,1,26,0,'2017-10-12 22:00:00',NULL),(492,0,1,18,0,'2017-10-12 22:00:00',NULL),(493,1,0,21,0,'2017-10-13 22:00:00',NULL),(494,0,1,9,0,'2017-10-23 22:00:00',NULL),(495,0,1,22,0,'2017-10-23 22:00:00',NULL),(496,0,1,9,0,'2017-10-23 22:00:00',NULL),(497,1,0,21,0,'2017-10-31 23:00:00',NULL),(498,0,1,21,0,'2017-10-31 23:00:00',NULL),(499,0,1,18,0,'2017-10-31 23:00:00',NULL),(500,1,0,22,0,'2018-09-15 22:00:00',NULL),(501,0,1,22,0,'2018-09-15 22:00:00',NULL),(502,0,1,9,0,'2018-09-15 22:00:00',NULL),(503,1,0,10,0,'2018-09-15 22:00:00',NULL),(504,0,1,10,0,'2018-09-15 22:00:00',NULL),(505,0,1,12,0,'2018-09-15 22:00:00',NULL),(506,0,1,3,0,'2018-09-15 22:00:00',NULL),(507,0,1,8,0,'2018-09-15 22:00:00',NULL),(508,1,0,10,0,'2018-09-15 22:00:00',NULL),(509,1,0,10,0,'2018-09-15 22:00:00',NULL),(510,1,0,12,0,'2018-09-15 22:00:00',NULL),(511,0,1,12,0,'2018-09-15 22:00:00',NULL),(512,1,0,10,0,'2018-09-15 22:00:00',NULL),(513,0,1,3,0,'2018-09-15 22:00:00',NULL),(514,0,1,22,0,'2018-09-15 22:00:00',NULL),(515,0,1,12,0,'2018-09-15 22:00:00',NULL),(516,1,0,22,0,'2017-04-28 22:00:00',NULL),(517,1,0,22,0,'2017-04-28 22:00:00',NULL),(518,1,0,22,0,'2017-04-28 22:00:00',NULL),(519,0,1,22,0,'2017-04-28 22:00:00',NULL),(520,0,1,22,0,'2017-04-28 22:00:00',NULL),(521,0,1,22,0,'2017-04-28 22:00:00',NULL),(522,1,0,30,0,'2017-04-28 22:00:00',NULL),(523,0,1,30,0,'2017-04-29 22:00:00',NULL),(524,1,0,30,0,'2017-04-29 22:00:00',NULL),(525,1,0,22,0,'2017-04-29 22:00:00',NULL),(526,1,0,30,0,'2017-04-29 22:00:00',NULL),(527,1,0,30,0,'2017-04-29 22:00:00',NULL),(528,0,1,30,0,'2017-04-29 22:00:00',NULL),(529,1,0,9,0,'2017-04-29 22:00:00',NULL),(530,0,1,30,0,'2017-04-29 22:00:00',NULL),(531,0,1,22,0,'2017-04-29 22:00:00',NULL),(532,1,0,30,0,'2017-04-29 22:00:00',NULL),(533,1,0,9,0,'2017-04-29 22:00:00',NULL),(534,0,1,30,0,'2017-04-29 22:00:00',NULL),(535,1,0,30,0,'2017-04-29 22:00:00',NULL),(536,0,1,27,0,'2017-05-01 22:00:00',NULL),(537,0,1,27,0,'2017-05-01 22:00:00',NULL),(538,1,0,31,0,'2017-05-05 22:00:00',NULL),(539,1,0,31,0,'2017-05-05 22:00:00',NULL),(540,1,0,31,0,'2017-05-05 22:00:00',NULL),(541,0,1,31,0,'2017-05-05 22:00:00',NULL),(542,1,0,32,0,'2017-05-05 22:00:00',NULL),(543,1,0,27,0,'2017-05-05 22:00:00',NULL),(544,0,1,27,0,'2017-05-05 22:00:00',NULL),(545,0,1,27,0,'2017-05-05 22:00:00',NULL),(546,0,1,27,0,'2017-05-05 22:00:00',NULL),(547,0,1,9,0,'2017-05-14 22:00:00',NULL),(548,0,1,22,0,'2017-05-14 22:00:00',NULL),(549,0,1,9,0,'2017-05-14 22:00:00',NULL),(550,1,0,22,0,'2017-05-14 22:00:00',NULL),(551,1,0,22,0,'2017-05-14 22:00:00',NULL),(552,1,0,22,0,'2017-05-14 22:00:00',NULL),(553,0,1,22,0,'2017-05-14 22:00:00',NULL),(554,1,0,9,0,'2017-05-14 22:00:00',NULL),(555,0,1,27,0,'2017-05-14 22:00:00',NULL),(556,0,1,27,0,'2017-05-14 22:00:00',NULL),(557,0,1,27,0,'2017-05-17 22:00:00',NULL),(558,0,1,27,0,'2017-05-17 22:00:00',NULL),(559,0,1,27,0,'2017-05-17 22:00:00',NULL),(560,1,0,27,0,'2017-05-17 22:00:00',NULL),(561,1,0,27,0,'2017-05-17 22:00:00',NULL),(562,1,0,27,0,'2017-05-17 22:00:00',NULL),(563,0,1,27,0,'2017-05-17 22:00:00',NULL),(564,0,1,27,0,'2017-05-17 22:00:00',NULL),(565,1,0,27,0,'2017-05-17 22:00:00',NULL),(566,0,1,27,0,'2017-05-17 22:00:00',NULL),(567,1,0,27,0,'2017-05-17 22:00:00',NULL),(568,1,0,27,0,'2017-05-17 22:00:00',NULL),(569,1,0,27,0,'2017-05-29 22:00:00',NULL),(570,1,0,27,0,'2017-05-29 22:00:00',NULL),(571,0,1,27,0,'2017-05-29 22:00:00',NULL),(572,0,1,27,0,'2017-05-29 22:00:00',NULL),(573,0,1,27,0,'2017-05-29 22:00:00',NULL),(574,1,0,27,0,'2017-05-29 22:00:00',NULL),(575,1,0,22,0,'2017-06-02 22:00:00',NULL),(576,1,0,22,0,'2017-06-02 22:00:00',NULL),(577,0,1,22,0,'2017-06-02 22:00:00',NULL),(578,1,0,30,0,'2017-06-02 22:00:00',NULL),(579,0,1,30,0,'2017-06-02 22:00:00',NULL),(580,0,1,30,0,'2017-06-02 22:00:00',NULL),(581,0,1,30,0,'2017-06-02 22:00:00',NULL),(582,1,0,22,0,'2017-06-02 22:00:00',NULL),(583,0,1,22,0,'2017-06-02 22:00:00',NULL),(584,1,0,9,0,'2017-06-02 22:00:00',NULL),(585,1,0,9,0,'2017-06-02 22:00:00',NULL),(586,1,0,27,0,'2017-06-08 22:00:00',NULL),(587,0,1,27,0,'2017-06-08 22:00:00',NULL),(588,0,1,27,0,'2017-06-08 22:00:00',NULL),(589,0,1,27,0,'2017-06-08 22:00:00',NULL),(590,0,1,27,0,'2017-06-08 22:00:00',NULL),(591,1,0,22,0,'2017-06-08 22:00:00',NULL),(592,1,0,22,0,'2017-06-08 22:00:00',NULL),(593,0,1,22,0,'2017-06-08 22:00:00',NULL),(594,1,0,9,0,'2017-06-08 22:00:00',NULL),(595,0,1,9,0,'2017-06-08 22:00:00',NULL),(596,1,0,9,0,'2017-06-08 22:00:00',NULL),(597,0,1,9,0,'2017-06-08 22:00:00',NULL),(598,1,0,27,0,'2017-06-09 22:00:00',NULL),(599,0,1,27,0,'2017-06-09 22:00:00',NULL),(600,1,0,27,0,'2017-06-09 22:00:00',NULL),(601,1,0,27,0,'2017-06-09 22:00:00',NULL),(602,0,1,9,0,'2017-06-22 22:00:00',NULL),(603,0,1,22,0,'2017-06-22 22:00:00',NULL),(604,0,1,9,0,'2017-06-22 22:00:00',NULL),(605,1,0,22,0,'2017-06-22 22:00:00',NULL),(606,0,1,22,0,'2017-06-22 22:00:00',NULL),(607,1,0,9,0,'2017-06-22 22:00:00',NULL),(608,1,0,9,0,'2017-06-22 22:00:00',NULL),(609,0,1,9,0,'2017-06-22 22:00:00',NULL),(610,1,0,9,0,'2017-06-22 22:00:00',NULL),(611,0,1,9,0,'2017-06-22 22:00:00',NULL),(612,0,1,9,0,'2017-06-22 22:00:00',NULL),(613,1,0,9,0,'2017-06-23 22:00:00',NULL),(614,1,0,9,0,'2017-06-23 22:00:00',NULL),(615,0,1,9,0,'2017-06-28 22:00:00',NULL),(616,1,0,22,0,'2017-06-28 22:00:00',NULL),(617,0,1,22,0,'2017-06-28 22:00:00',NULL),(618,0,1,9,0,'2017-06-28 22:00:00',NULL),(619,1,0,22,0,'2017-06-28 22:00:00',NULL),(620,0,1,22,0,'2017-06-28 22:00:00',NULL),(621,0,1,9,0,'2017-06-28 22:00:00',NULL),(622,0,1,9,0,'2017-07-20 22:00:00',NULL),(623,0,1,22,0,'2017-07-20 22:00:00',NULL),(624,0,1,9,0,'2017-07-20 22:00:00',NULL),(625,1,0,27,0,'2017-07-22 22:00:00',NULL),(626,1,0,27,0,'2017-07-22 22:00:00',NULL),(627,0,1,22,0,'2017-07-22 22:00:00',NULL),(628,1,0,9,0,'2017-07-22 22:00:00',NULL),(629,1,0,22,0,'2017-07-22 22:00:00',NULL),(630,1,0,27,0,'2017-07-22 22:00:00',NULL),(631,0,1,27,0,'2017-07-22 22:00:00',NULL),(632,1,0,27,0,'2017-07-22 22:00:00',NULL),(633,0,1,9,0,'2017-08-12 22:00:00',NULL),(634,0,1,22,0,'2017-08-12 22:00:00',NULL),(635,1,0,9,0,'2017-08-12 22:00:00',NULL),(636,1,0,9,0,'2017-08-12 22:00:00',NULL),(637,1,0,30,0,'2017-08-12 22:00:00',NULL),(638,1,0,9,0,'2017-08-12 22:00:00',NULL),(639,0,1,9,0,'2017-08-12 22:00:00',NULL),(640,0,1,22,0,'2017-08-12 22:00:00',NULL),(641,1,0,9,0,'2017-10-06 22:00:00',NULL),(642,0,1,9,0,'2017-10-06 22:00:00',NULL),(643,0,1,22,0,'2017-10-06 22:00:00',NULL),(644,1,0,9,0,'2017-10-06 22:00:00',NULL),(645,0,1,9,0,'2017-10-06 22:00:00',NULL),(646,1,0,27,0,'2017-10-06 22:00:00',NULL),(647,1,0,27,0,'2017-10-06 22:00:00',NULL),(648,0,1,30,0,'2017-10-06 22:00:00',NULL),(649,0,1,9,0,'2017-10-07 22:00:00',NULL),(650,1,0,22,0,'2017-10-07 22:00:00',NULL),(651,1,0,27,0,'2017-10-07 22:00:00',NULL),(652,0,1,22,0,'2017-10-07 22:00:00',NULL),(653,0,1,27,0,'2017-10-07 22:00:00',NULL),(654,1,0,22,0,'2017-10-07 22:00:00',NULL),(655,0,1,27,0,'2017-10-07 22:00:00',NULL),(656,0,1,22,0,'2017-10-07 22:00:00',NULL),(657,0,1,9,0,'2017-10-07 22:00:00',NULL),(658,0,1,22,0,'2017-10-12 22:00:00',NULL),(659,0,1,27,0,'2017-10-12 22:00:00',NULL),(660,1,0,27,0,'2017-10-13 22:00:00',NULL),(661,0,1,9,0,'2017-10-23 22:00:00',NULL),(662,0,1,22,0,'2017-10-23 22:00:00',NULL),(663,0,1,9,0,'2017-10-23 22:00:00',NULL),(664,1,0,27,0,'2017-10-31 23:00:00',NULL),(665,0,1,27,0,'2017-10-31 23:00:00',NULL),(666,0,1,27,0,'2017-10-31 23:00:00',NULL),(667,1,0,22,0,'2018-09-15 22:00:00',NULL),(668,0,1,22,0,'2018-09-15 22:00:00',NULL),(669,0,1,9,0,'2018-09-15 22:00:00',NULL),(670,1,0,30,0,'2018-09-15 22:00:00',NULL),(671,0,1,30,0,'2018-09-15 22:00:00',NULL),(672,0,1,30,0,'2018-09-15 22:00:00',NULL),(673,0,1,9,0,'2018-09-15 22:00:00',NULL),(674,0,1,22,0,'2018-09-15 22:00:00',NULL),(675,1,0,30,0,'2018-09-15 22:00:00',NULL),(676,1,0,30,0,'2018-09-15 22:00:00',NULL),(677,1,0,30,0,'2018-09-15 22:00:00',NULL),(678,0,1,30,0,'2018-09-15 22:00:00',NULL),(679,1,0,30,0,'2018-09-15 22:00:00',NULL),(680,0,1,9,0,'2018-09-15 22:00:00',NULL),(681,0,1,22,0,'2018-09-15 22:00:00',NULL),(682,0,1,30,0,'2018-09-15 22:00:00',NULL),(683,1,0,1,0,'2018-10-11 20:05:13',NULL);
/*!40000 ALTER TABLE `games` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping data for table `players`
--

LOCK TABLES `players` WRITE;
/*!40000 ALTER TABLE `players` DISABLE KEYS */;
INSERT INTO `players` VALUES (1,'schwedi',9,7,2,77.7778,'2018-10-11 16:11:55','2018-10-11 20:05:13',1),(2,'test1',546,269,277,49.2674,'2018-10-11 16:11:55','2018-10-11 20:05:13',0),(3,'schwi',1,1,0,100,'2018-10-11 16:21:21','2018-10-11 16:21:21',0),(4,'test2',255,139,116,54.5098,'2018-10-11 16:21:21','2018-10-11 19:30:37',0),(5,'test3',227,102,125,44.9339,'2018-10-11 16:26:28','2018-10-11 19:31:48',0),(6,'test4',77,34,43,44.1558,'2018-10-11 19:24:41','2018-10-11 19:30:36',0),(7,'test5',231,123,108,53.2468,'2018-10-11 19:29:09','2018-10-11 19:30:36',0),(8,'test6',20,8,12,40,'2018-10-11 19:29:09','2018-10-11 19:31:39',0);
/*!40000 ALTER TABLE `players` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping data for table `stats`
--

LOCK TABLES `stats` WRITE;
/*!40000 ALTER TABLE `stats` DISABLE KEYS */;
/*!40000 ALTER TABLE `stats` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping data for table `users`
--

LOCK TABLES `users` WRITE;
/*!40000 ALTER TABLE `users` DISABLE KEYS */;
INSERT INTO `users` VALUES (1,'schwedi','schwiddi@me.com','$2b$10$l6UCMHTC.nP7GReyiIH8oOSaWHd.9/nDc4XZ1cUp.HiTs/lnHAGum','2018-10-11 16:10:59','2018-10-11 20:06:54','2018-10-11 20:06:54',1,1,1,1);
/*!40000 ALTER TABLE `users` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'r21'
--
/*!50003 DROP PROCEDURE IF EXISTS `AddGame` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_AUTO_VALUE_ON_ZERO' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `AddGame`(IN playerA_p VARCHAR(50), IN playerB_p VARCHAR(50), IN scoreplayerA_p VARCHAR(1), IN scoreplayerB_p VARCHAR(1))
BEGIN
	SET @playerA_id = '0';
	SET @playerB_id = '0';
	SELECT id INTO @playerA_id FROM players p WHERE p.`name` = playerA_p;
	SELECT id INTO @playerB_id FROM players p WHERE p.`name` = playerB_p;
	IF @playerA_id = '0' THEN
    	INSERT INTO players (name) VALUES (playerA_p);
    	SET @playerA_id := LAST_INSERT_ID();
    END IF;

    IF @playerB_id = '0' THEN
    	INSERT INTO players (name) VALUES (playerB_p);
    	SET @playerB_id := LAST_INSERT_ID();
    END IF;





	/* then get encouters id, when not exist add */
	SET @encounter_id = '0';
	SELECT id INTO @encounter_id FROM encounters WHERE playerA_id = @playerA_id AND playerB_id = @playerB_id;
	IF @encounter_id = '0' THEN
    	INSERT INTO encounters (`playerA_id`, `playerB_id`) VALUES (@playerA_id, @playerB_id);
    	SET @encounter_id := LAST_INSERT_ID();
    END IF;


	/* add the game with the corespoding id's */
	/* check if all is set */
	IF @encounter_id <> '0' THEN
      INSERT INTO games (`scoreplayerA`,`scoreplayerB`,`encounter_id`) VALUES (scoreplayerA_p, scoreplayerB_p, @encounter_id);
      SET @gameid := LAST_INSERT_ID();
    END IF;
    IF @gameid <> '0' THEN
    	SELECT g.`id`, a.`name` AS 'playerA', b.`name` AS 'playerB', g.`scoreplayerA`, g.`scoreplayerB`,g.`isApproved`,g.`encounter_id`, g.`ts_insert`, g.`ts_update`
		FROM games g
		LEFT JOIN encounters as e
			ON g.encounter_id = e.id
		LEFT JOIN players AS a
			ON e.playerA_id = a.id
		LEFT JOIN players AS b
			ON e.playerB_id = b.id
		WHERE g.id = @gameid;
    END IF;
    
    /* raise games_total for playerA */
	IF @playerA_id <> '0' THEN
		UPDATE players p SET p.games_total = p.games_total + 1 WHERE p.id = @playerA_id;
    END IF;

    /* raise games_total for playerB */
	IF @playerB_id <> '0' THEN
		UPDATE players p SET p.games_total = p.games_total + 1 WHERE p.id = @playerB_id;
    END IF;
    
    
    
    
    
    /* raise games_won and games_lost from both players */
    /* if scoreplayerA is greater then scoreplayerB
		then raise games_won from playerA and raise games_lost playerB otherwhise do oposit */
	IF scoreplayerA_p > scoreplayerB_p THEN
		UPDATE players p SET p.games_won = p.games_won + 1 WHERE p.id = @playerA_id;
        UPDATE players p SET p.games_lost = p.games_lost + 1 WHERE p.id = @playerB_id;
	ELSE
		UPDATE players p SET p.games_won = p.games_won + 1 WHERE p.id = @playerB_id;
        UPDATE players p SET p.games_lost = p.games_lost + 1 WHERE p.id = @playerA_id;
    END IF;
    
    /* now calculate ratio and write */
    /* handle player A */
    UPDATE players p SET p.games_win_lost = ( games_won / games_total ) * 100 WHERE p.id = @playerA_id;
    
    /* handle player B */
    UPDATE players p SET p.games_win_lost = ( games_won / games_total ) * 100 WHERE p.id = @playerB_id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `AddGameWithDate` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `AddGameWithDate`(IN playerA_p VARCHAR(50), IN playerB_p VARCHAR(50), IN scoreplayerA_p VARCHAR(1), IN scoreplayerB_p VARCHAR(1), IN date_p VARCHAR(20))
BEGIN
	SET @playerA_id = '0';
	SET @playerB_id = '0';
	SELECT id INTO @playerA_id FROM players p WHERE p.`name` = playerA_p;
	SELECT id INTO @playerB_id FROM players p WHERE p.`name` = playerB_p;
	IF @playerA_id = '0' THEN
    	INSERT INTO players (name) VALUES (playerA_p);
    	SET @playerA_id := LAST_INSERT_ID();
    END IF;

    IF @playerB_id = '0' THEN
    	INSERT INTO players (name) VALUES (playerB_p);
    	SET @playerB_id := LAST_INSERT_ID();
    END IF;





	/* then get encouters id, when not exist add */
	SET @encounter_id = '0';
	SELECT id INTO @encounter_id FROM encounters WHERE playerA_id = @playerA_id AND playerB_id = @playerB_id;
	IF @encounter_id = '0' THEN
    	INSERT INTO encounters (`playerA_id`, `playerB_id`) VALUES (@playerA_id, @playerB_id);
    	SET @encounter_id := LAST_INSERT_ID();
    END IF;


	/* add the game with the corespoding id's */
	/* check if all is set */
	IF @encounter_id <> '0' THEN
      INSERT INTO games (`scoreplayerA`,`scoreplayerB`,`encounter_id`,`ts_insert` ) VALUES (scoreplayerA_p, scoreplayerB_p, @encounter_id, STR_TO_DATE(date_p, '%d.%m.%Y'));
      SET @gameid := LAST_INSERT_ID();
    END IF;
    IF @gameid <> '0' THEN
    	SELECT g.`id`, a.`name` AS 'playerA', b.`name` AS 'playerB', g.`scoreplayerA`, g.`scoreplayerB`,g.`isApproved`,g.`encounter_id`, g.`ts_insert`, g.`ts_update`
		FROM games g
		LEFT JOIN encounters as e
			ON g.encounter_id = e.id
		LEFT JOIN players AS a
			ON e.playerA_id = a.id
		LEFT JOIN players AS b
			ON e.playerB_id = b.id
		WHERE g.id = @gameid;
    END IF;
    
    /* raise games_total for playerA */
	IF @playerA_id <> '0' THEN
		UPDATE players p SET p.games_total = p.games_total + 1 WHERE p.id = @playerA_id;
    END IF;

    /* raise games_total for playerB */
	IF @playerB_id <> '0' THEN
		UPDATE players p SET p.games_total = p.games_total + 1 WHERE p.id = @playerB_id;
    END IF;
    
    
    
    
    
    /* raise games_won and games_lost from both players */
    /* if scoreplayerA is greater then scoreplayerB
		then raise games_won from playerA and raise games_lost playerB otherwhise do oposit */
	IF scoreplayerA_p > scoreplayerB_p THEN
		UPDATE players p SET p.games_won = p.games_won + 1 WHERE p.id = @playerA_id;
        UPDATE players p SET p.games_lost = p.games_lost + 1 WHERE p.id = @playerB_id;
	ELSE
		UPDATE players p SET p.games_won = p.games_won + 1 WHERE p.id = @playerB_id;
        UPDATE players p SET p.games_lost = p.games_lost + 1 WHERE p.id = @playerA_id;
    END IF;
    
    /* now calculate ratio and write */
    /* handle player A */
    UPDATE players p SET p.games_win_lost = ( games_won / games_total ) * 100 WHERE p.id = @playerA_id;
    
    /* handle player B */
    UPDATE players p SET p.games_win_lost = ( games_won / games_total ) * 100 WHERE p.id = @playerB_id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `AddUser` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `AddUser`(IN name_p VARCHAR(255), IN email_p VARCHAR(255), IN password_p VARCHAR(1024))
BEGIN
	INSERT INTO users (name, email, password)
	VALUES (name_p, email_p, password_p);
    SET @user_id := LAST_INSERT_ID();
    SELECT id, name, email FROM users WHERE id = @user_id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `ApproveUser` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `ApproveUser`(IN user_p INT(11))
BEGIN
    UPDATE users SET isApproved = 1 WHERE id = user_p;
    SELECT * FROM users u WHERE id = user_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `CalcStats` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `CalcStats`()
BEGIN
	/* clear stats tabel */
    TRUNCATE stats;
    
    /* first write down all player ids */
	INSERT INTO stats (playerid) SELECT id FROM players;
    
    /* get all games from every player an write it to total */
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `CheckIfUserExist` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `CheckIfUserExist`(IN email_p VARCHAR(255))
BEGIN
	SELECT u.id FROM users u WHERE u.email = email_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `CheckMailAlreadyRegistered` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `CheckMailAlreadyRegistered`(IN email_p VARCHAR(255))
BEGIN
	SELECT u.id FROM users u WHERE u.email = email_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DeleteAllGames` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `DeleteAllGames`()
BEGIN
	DELETE FROM games;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DeleteGame` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `DeleteGame`(IN gameId_p INT(11))
BEGIN
	/* init some needed vars */
    SET @id_winner = '0';
    SET @id_looser = '0';
    SET @tmp_winnderfinder = '99';
    
    /* find the winner */
    SELECT g.scoreplayerA INTO @tmp_winnerfinder FROM games g WHERE g.id = gameId_p;
	
    IF @tmp_winnerfinder = '1' THEN
    	SELECT a.`id` INTO @id_winner FROM games g
			LEFT OUTER JOIN encounters as e
				ON g.encounter_id = e.id
			LEFT OUTER JOIN players AS a
				ON e.playerA_id = a.id
			LEFT OUTER JOIN players AS b
				ON e.playerB_id = b.id
			WHERE g.id = gameId_p;
		SELECT b.`id` INTO @id_looser FROM games g
			LEFT OUTER JOIN encounters as e
				ON g.encounter_id = e.id
			LEFT OUTER JOIN players AS a
				ON e.playerA_id = a.id
			LEFT OUTER JOIN players AS b
				ON e.playerB_id = b.id
			WHERE g.id = gameId_p;
	ELSE
    	SELECT b.`id` INTO @id_winner FROM games g
			LEFT OUTER JOIN encounters as e
				ON g.encounter_id = e.id
			LEFT OUTER JOIN players AS a
				ON e.playerA_id = a.id
			LEFT OUTER JOIN players AS b
				ON e.playerB_id = b.id
			WHERE g.id = gameId_p;
		SELECT a.`id` INTO @id_looser FROM games g
			LEFT OUTER JOIN encounters as e
				ON g.encounter_id = e.id
			LEFT OUTER JOIN players AS a
				ON e.playerA_id = a.id
			LEFT OUTER JOIN players AS b
				ON e.playerB_id = b.id
			WHERE g.id = gameId_p;
    END IF;    

    
    IF @id_winner <> '0' THEN
    	UPDATE players p SET p.games_won = p.games_won - 1 WHERE p.id = @id_winner;
        UPDATE players p SET p.games_total = p.games_total - 1 WHERE p.id = @id_winner;
        
        /* handle 0 games */
        SELECT p.games_total INTO @total_games_winner FROM players p WHERE p.id = @id_winner;
        IF @total_games_winner = '0' THEN
			UPDATE players p SET p.games_win_lost = 0 WHERE p.id = @id_winner;
		ELSE
			UPDATE players p SET p.games_win_lost = ( games_won / games_total ) * 100 WHERE p.id = @id_winner;
		END IF;
    END IF;
    
    IF @id_looser <> '0' THEN
    	UPDATE players p SET p.games_lost = p.games_lost - 1 WHERE p.id = @id_looser;
        UPDATE players p SET p.games_total = p.games_total - 1 WHERE p.id = @id_looser;
        
        /* handle 0 games */
        SELECT p.games_total INTO @total_games_looser FROM players p WHERE p.id = @id_looser;
        IF @total_games_looser = '0' THEN
			UPDATE players p SET p.games_win_lost = 0 WHERE p.id = @id_looser;
		ELSE
			UPDATE players p SET p.games_win_lost = ( games_won / games_total ) * 100 WHERE p.id = @id_looser;
		END IF;
    END IF;

    
	DELETE FROM games WHERE id = gameId_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetAllEncounters` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetAllEncounters`()
BEGIN
	SELECT e.id,a.id AS 'playerA_id', a.name AS 'playerA_name', b.id AS 'playerB_id', b.name AS 'playerB_name'
	FROM encounters AS e
	INNER JOIN (SELECT * FROM players) AS a
		ON e.playerA_id=a.id
	INNER JOIN (SELECT * FROM players) AS b
		ON e.playerB_id=b.id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetAllEncountersFromPlayer` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetAllEncountersFromPlayer`(IN playerId_p INT(11))
BEGIN
	SELECT e.id,a.id AS 'playerA_id', a.name AS 'playerA_name', b.id AS 'playerB_id', b.name AS 'playerB_name'
	FROM encounters AS e
	INNER JOIN (SELECT * FROM players) AS a
		ON e.playerA_id=a.id
	INNER JOIN (SELECT * FROM players) AS b
		ON e.playerB_id=b.id
	WHERE a.id = playerId_p OR b.id = playerId_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetAllGames` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetAllGames`()
BEGIN
SELECT g.`id`, a.`id` AS 'playerAid', a.`name` AS 'playerA', b.`id` AS 'playerBid', b.`name` AS 'playerB', g.`scoreplayerA`, g.`scoreplayerB`,g.`isApproved`, g.`ts_insert`, g.`ts_update`
	FROM games g
LEFT OUTER JOIN encounters as e
	ON g.encounter_id = e.id
LEFT OUTER JOIN players AS a
	ON e.playerA_id = a.id
LEFT OUTER JOIN players AS b
	ON e.playerB_id = b.id
ORDER BY g.`id` DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetAllPlayers` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetAllPlayers`()
BEGIN
	SELECT * FROM players p ORDER BY p.games_win_lost DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetAllRankedPlayers` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetAllRankedPlayers`()
BEGIN
	SELECT 
		*
	FROM
		players p
	WHERE
		p.games_total >= 20
	ORDER BY p.games_win_lost DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetAllUnrankedPlayers` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetAllUnrankedPlayers`()
BEGIN
	SELECT 
		*
	FROM
		players p
	WHERE
		p.games_total < 20
	ORDER BY p.name ASC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetAllUsers` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetAllUsers`()
BEGIN
	SELECT u.id AS id, p.id AS playerid, u.name AS name, u.email, u.isAdmin, u.canAddGame, u.isApproved, u.claimedPlayerId, p.games_total, p.games_won, p.games_lost, p.games_win_lost 
	FROM users u
	LEFT JOIN players p ON u.id = p.user_id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetGameById` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetGameById`(IN id_p INT(11))
BEGIN
SELECT g.`id`, a.`name` AS 'playerA', b.`name` AS 'playerB', g.`scoreplayerA`, g.`scoreplayerB`,g.`isApproved`, g.`ts_insert`, g.`ts_update`
	FROM games g
LEFT OUTER JOIN encounters as e
	ON g.encounter_id = e.id
LEFT OUTER JOIN players AS a
	ON e.playerA_id = a.id
LEFT OUTER JOIN players AS b
	ON e.playerB_id = b.id
	WHERE g.id = id_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetHashedPassword` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetHashedPassword`(IN email_p VARCHAR(255))
BEGIN
	SELECT u.password FROM users u WHERE u.email = email_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetPlayerId` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetPlayerId`(IN playerA CHAR(20))
BEGIN
  SELECT id FROM players
  WHERE name = playerA;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetUnclaimedPlayers` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetUnclaimedPlayers`()
BEGIN
	SELECT id, name FROM players WHERE user_id = 0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GetUser` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `GetUser`(IN email_p VARCHAR(255))
BEGIN
	SELECT * FROM users u WHERE u.email = email_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SetClaimedPlayerId` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `SetClaimedPlayerId`(IN claim_p INT(11), IN user_p INT(11))
BEGIN
    UPDATE users SET claimedPlayerId = claim_p WHERE id = user_p;
    SELECT u.id, u.name, u.claimedPlayerId FROM users u WHERE id = user_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SetLastLogin` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `SetLastLogin`(IN email_p VARCHAR(255))
BEGIN
	UPDATE users u SET u.ts_lastlogin = NOW() WHERE u.email = email_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SetPlayerIdToClaimedPlayerId` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `SetPlayerIdToClaimedPlayerId`(IN userid_p INT(11))
BEGIN
    UPDATE players SET user_id = (SELECT id FROM users WHERE id = userid_p)
	WHERE id = (SELECT claimedPlayerId FROM users WHERE id = userid_p);
    UPDATE players SET name = (SELECT name FROM users WHERE id = userid_p)
	WHERE id = (SELECT claimedPlayerId FROM users WHERE id = userid_p);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdateGame` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`r21`@`localhost` PROCEDURE `UpdateGame`(IN gameId_p INT(11), IN playerA_p VARCHAR(50), IN playerB_p VARCHAR(50), IN scoreplayerA_p INT(1), IN scoreplayerB_p INT(1))
BEGIN
	SET @playerA_id = '0';
	SET @playerB_id = '0';
	SELECT id INTO @playerA_id FROM players p WHERE p.`name` = playerA_p;
	SELECT id INTO @playerB_id FROM players p WHERE p.`name` = playerB_p;
	IF @playerA_id = '0' THEN
    	INSERT INTO players (name) VALUES (playerA_p);
    	SET @playerA_id := LAST_INSERT_ID();
    END IF;

    IF @playerB_id = '0' THEN
    	INSERT INTO players (name) VALUES (playerB_p);
    	SET @playerB_id := LAST_INSERT_ID();
    END IF;



	/* then get encouters id, when not exist add */
	SET @encounter_id = '0';
	SELECT id INTO @encounter_id FROM encounters WHERE playerA_id = @playerA_id AND playerB_id = @playerB_id;
	IF @encounter_id = '0' THEN
    	INSERT INTO encounters (`playerA_id`, `playerB_id`) VALUES (@playerA_id, @playerB_id);
    	SET @encounter_id := LAST_INSERT_ID();
    END IF;


	/* add the game with the corespoding id's */
	IF @encounter_id <> '0' THEN
	  UPDATE games g SET g.`encounter_id` = @encounter_id, g.`scoreplayerA` = scoreplayerA_p, g.`scoreplayerB` = scoreplayerB_p WHERE g.`id` = gameId_p;
    END IF;


    SELECT g.`id`, a.`name` AS 'playerA', b.`name` AS 'playerB', g.`scoreplayerA`, g.`scoreplayerB`,g.`isApproved`,g.`encounter_id`, g.`ts_insert`, g.`ts_update`
	FROM games g
	LEFT JOIN encounters as e
		ON g.encounter_id = e.id
	LEFT JOIN players AS a
		ON e.playerA_id = a.id
	LEFT JOIN players AS b
		ON e.playerB_id = b.id
	WHERE g.id = gameId_p;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2018-10-11 23:14:29
